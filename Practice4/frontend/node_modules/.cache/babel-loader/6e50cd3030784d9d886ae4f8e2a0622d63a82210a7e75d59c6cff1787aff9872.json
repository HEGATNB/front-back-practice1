{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\sass-website\\\\practice4\\\\frontend\\\\src\\\\pages\\\\ProductsPage\\\\ProductsPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"./ProductsPage.scss\";\nimport { api } from \"../../api\";\nimport ProductsList from \"../../components/ProductsList\";\nimport ProductModal from \"../../components/ProductModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProductsPage() {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalMode, setModalMode] = useState(\"create\");\n  const [editingProduct, setEditingProduct] = useState(null);\n  useEffect(() => {\n    loadProducts();\n  }, []);\n  const loadProducts = async () => {\n    try {\n      setLoading(true);\n      const data = await api.getProducts();\n      setProducts(data);\n    } catch (err) {\n      console.error(err);\n      alert(\"Ошибка загрузки товаров\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const openCreate = () => {\n    setModalMode(\"create\");\n    setEditingProduct(null);\n    setModalOpen(true);\n  };\n  const openEdit = product => {\n    setModalMode(\"edit\");\n    setEditingProduct(product);\n    setModalOpen(true);\n  };\n  const closeModal = () => {\n    setModalOpen(false);\n    setEditingProduct(null);\n  };\n  const handleDelete = async id => {\n    const ok = window.confirm(\"Удалить товар?\");\n    if (!ok) return;\n    try {\n      await api.deleteProduct(id);\n      setProducts(prev => prev.filter(p => p.id !== id));\n    } catch (err) {\n      console.error(err);\n      alert(\"Ошибка удаления товара\");\n    }\n  };\n  const handleSubmitModal = async payload => {\n    try {\n      if (modalMode === \"create\") {\n        const newProduct = await api.createProduct(payload);\n        setProducts(prev => [...prev, newProduct]);\n      } else {\n        const updatedProduct = await api.updateProduct(payload.id, payload);\n        setProducts(prev => prev.map(p => p.id === payload.id ? updatedProduct : p));\n      }\n      closeModal();\n    } catch (err) {\n      console.error(err);\n      alert(\"Ошибка сохранения товара\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header__inner\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"brand\",\n          children: \"SpaceShop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header__right\",\n          children: \"\\u041C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D \\u043A\\u043E\\u0441\\u043C\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0445 \\u043E\\u0431\\u044A\\u0435\\u043A\\u0442\\u043E\\u0432\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"toolbar\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"title\",\n            children: \"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433 \\u043A\\u043E\\u0441\\u043C\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0445 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn--primary\",\n            onClick: openCreate,\n            children: \"\\u2728 \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0431\\u044A\\u0435\\u043A\\u0442\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty\",\n          children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043A\\u043E\\u0441\\u043C\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0445 \\u043E\\u0431\\u044A\\u0435\\u043A\\u0442\\u043E\\u0432...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(ProductsList, {\n          products: products,\n          onEdit: openEdit,\n          onDelete: handleDelete\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"footer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"footer__inner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProductModal, {\n      open: modalOpen,\n      mode: modalMode,\n      initialProduct: editingProduct,\n      onClose: closeModal,\n      onSubmit: handleSubmitModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductsPage, \"XLTNVp6bC8fA5tIRSJVl+jkaYjE=\");\n_c = ProductsPage;\nvar _c;\n$RefreshReg$(_c, \"ProductsPage\");","map":{"version":3,"names":["React","useState","useEffect","api","ProductsList","ProductModal","jsxDEV","_jsxDEV","ProductsPage","_s","products","setProducts","loading","setLoading","modalOpen","setModalOpen","modalMode","setModalMode","editingProduct","setEditingProduct","loadProducts","data","getProducts","err","console","error","alert","openCreate","openEdit","product","closeModal","handleDelete","id","ok","window","confirm","deleteProduct","prev","filter","p","handleSubmitModal","payload","newProduct","createProduct","updatedProduct","updateProduct","map","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onEdit","onDelete","open","mode","initialProduct","onClose","onSubmit","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Desktop/sass-website/practice4/frontend/src/pages/ProductsPage/ProductsPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./ProductsPage.scss\";\nimport { api } from \"../../api\";\nimport ProductsList from \"../../components/ProductsList\";\nimport ProductModal from \"../../components/ProductModal\";\n\nexport default function ProductsPage() {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalMode, setModalMode] = useState(\"create\");\n  const [editingProduct, setEditingProduct] = useState(null);\n\n  useEffect(() => {\n    loadProducts();\n  }, []);\n\n  const loadProducts = async () => {\n    try {\n      setLoading(true);\n      const data = await api.getProducts();\n      setProducts(data);\n    } catch (err) {\n      console.error(err);\n      alert(\"Ошибка загрузки товаров\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const openCreate = () => {\n    setModalMode(\"create\");\n    setEditingProduct(null);\n    setModalOpen(true);\n  };\n\n  const openEdit = (product) => {\n    setModalMode(\"edit\");\n    setEditingProduct(product);\n    setModalOpen(true);\n  };\n\n  const closeModal = () => {\n    setModalOpen(false);\n    setEditingProduct(null);\n  };\n\n  const handleDelete = async (id) => {\n    const ok = window.confirm(\"Удалить товар?\");\n    if (!ok) return;\n\n    try {\n      await api.deleteProduct(id);\n      setProducts((prev) => prev.filter((p) => p.id !== id));\n    } catch (err) {\n      console.error(err);\n      alert(\"Ошибка удаления товара\");\n    }\n  };\n\n  const handleSubmitModal = async (payload) => {\n    try {\n      if (modalMode === \"create\") {\n        const newProduct = await api.createProduct(payload);\n        setProducts((prev) => [...prev, newProduct]);\n      } else {\n        const updatedProduct = await api.updateProduct(payload.id, payload);\n        setProducts((prev) =>\n          prev.map((p) => (p.id === payload.id ? updatedProduct : p))\n        );\n      }\n      closeModal();\n    } catch (err) {\n      console.error(err);\n      alert(\"Ошибка сохранения товара\");\n    }\n  };\n\n  return (\n    <div className=\"page\">\n      <header className=\"header\">\n        <div className=\"header__inner\">\n          <div className=\"brand\">SpaceShop</div>\n          <div className=\"header__right\">Магазин космических объектов</div>\n        </div>\n      </header>\n\n      <main className=\"main\">\n        <div className=\"container\">\n          <div className=\"toolbar\">\n            <h1 className=\"title\">Каталог космических товаров</h1>\n            <button className=\"btn btn--primary\" onClick={openCreate}>\n              ✨ Добавить объект\n            </button>\n          </div>\n\n          {loading ? (\n            <div className=\"empty\">Загрузка космических объектов...</div>\n          ) : (\n            <ProductsList\n              products={products}\n              onEdit={openEdit}\n              onDelete={handleDelete}\n            />\n          )}\n        </div>\n      </main>\n\n      <footer className=\"footer\">\n        <div className=\"footer__inner\"></div>\n      </footer>\n\n      <ProductModal\n        open={modalOpen}\n        mode={modalMode}\n        initialProduct={editingProduct}\n        onClose={closeModal}\n        onSubmit={handleSubmitModal}\n      />\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}